[
  {
    "Id": "412301",
    "ThreadId": "203254",
    "Html": "<p>&nbsp;</p>\r\n<p>Hello,</p>\r\n<p>I am trying to use MVVM Light V3/alpha 3 in a SilverLight 4 project to bind a TextBox's GotFocus event to a RelayCommand in my ViewModel. &nbsp;I started by exposing HandleFocusCommand on my VM:</p>\r\n<div style=\"color:Black;background-color:White\">\r\n<pre><span style=\"color:Blue\">public</span> RelayCommand&lt;<span style=\"color:Blue\">string</span>&gt; HandleFocusCommand\r\n{\r\n\t<span style=\"color:Blue\">get</span>;\r\n\t<span style=\"color:Blue\">private</span> <span style=\"color:Blue\">set</span>;\r\n}\r\n</pre>\r\n</div>\r\n<p>Then I set the Handler in my VM's constructor:</p>\r\n<div style=\"color:Black;background-color:White\">\r\n<pre><span style=\"color:Blue\">public</span> SearchViewModel()\r\n{\r\n\tHandleFocusCommand = <span style=\"color:Blue\">new</span> RelayCommand&lt;<span style=\"color:Blue\">string</span>&gt;(e =&gt;\r\n\t{\r\n\t\t<span style=\"color:Blue\">if</span> (query == DefaultSearchLabel)\r\n\t\t\tQuery = String.Empty;\r\n\t});\r\n}\r\n</pre>\r\n</div>\r\n<p>In my xaml, I setup the event trigger on my TextBox:</p>\r\n<div style=\"color:Black;background-color:White\">\r\n<pre><span style=\"color:Blue\">&lt;</span><span style=\"color:#A31515\">TextBox</span> <span style=\"color:Red\">Text</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">{Binding Query, Mode=TwoWay}</span><span style=\"color:Black\">&quot;</span> <span style=\"color:Red\">Margin</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">15,10,15,10</span><span style=\"color:Black\">&quot;</span> <span style=\"color:Red\">TextWrapping</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">Wrap</span><span style=\"color:Black\">&quot;</span> <span style=\"color:Red\">VerticalAlignment</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">Top</span><span style=\"color:Black\">&quot;</span> <span style=\"color:Red\">d:LayoutOverrides</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">Width</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">&gt;</span>\r\n\t<span style=\"color:Blue\">&lt;</span><span style=\"color:#A31515\">i</span><span style=\"color:Blue\">:</span><span style=\"color:#A31515\">Interaction.Triggers</span><span style=\"color:Blue\">&gt;</span>\r\n\t\t<span style=\"color:Blue\">&lt;</span><span style=\"color:#A31515\">i</span><span style=\"color:Blue\">:</span><span style=\"color:#A31515\">EventTrigger</span> <span style=\"color:Red\">EventName</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">GotFocus</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">&gt;</span>\r\n\t\t\t<span style=\"color:Blue\">&lt;</span><span style=\"color:#A31515\">cmd</span><span style=\"color:Blue\">:</span><span style=\"color:#A31515\">EventToCommand</span>  <span style=\"color:Red\">Command</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">{Binding HandleFocusCommand, Mode=OneWay}</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">/&gt;</span>\r\n\t\t<span style=\"color:Blue\">&lt;/</span><span style=\"color:#A31515\">i</span><span style=\"color:Blue\">:</span><span style=\"color:#A31515\">EventTrigger</span><span style=\"color:Blue\">&gt;</span>\r\n\t<span style=\"color:Blue\">&lt;/</span><span style=\"color:#A31515\">i</span><span style=\"color:Blue\">:</span><span style=\"color:#A31515\">Interaction.Triggers</span><span style=\"color:Blue\">&gt;</span>\r\n<span style=\"color:Blue\">&lt;/</span><span style=\"color:#A31515\">TextBox</span><span style=\"color:Blue\">&gt;</span>\r\n</pre>\r\n</div>\r\n<p>This compiles, but at runtime I get the following DataBinding exception:</p>\r\n<pre>System.Windows.Data Error: 'MS.Internal.Data.DynamicValueConverter' converter failed to convert value 'GalaSoft.MvvmLight.Command.RelayCommand`1[System.Windows.RoutedEventArgs]' (type 'GalaSoft.MvvmLight.Command.RelayCommand`1[System.Windows.RoutedEventArgs]'); BindingExpression: Path='HandleFocusCommand' DataItem='Navigator.SearchViewModel' (HashCode=35535544); target element is 'GalaSoft.MvvmLight.Command.EventToCommand' (Name='null'); target property is 'Command' (type 'System.Windows.Data.Binding').. System.InvalidOperationException: Can't convert type GalaSoft.MvvmLight.Command.RelayCommand`1[System.Windows.RoutedEventArgs] to type System.Windows.Data.Binding.\r\n   at MS.Internal.Data.DefaultValueConverter.Create(Type sourceType, Type targetType, Boolean targetToSource)\r\n   at MS.Internal.Data.DynamicValueConverter.EnsureConverter(Type sourceType, Type targetType)\r\n   at MS.Internal.Data.DynamicValueConverter.Convert(Object value, Type targetType, Object parameter, CultureInfo culture)\r\n   at System.Windows.Data.BindingExpression.ConvertToTarget(Object value). </pre>\r\n<p>It seems the Data Binding expression is having trouble being&nbsp;automatically&nbsp;converted to the type of the EventToCommand's Command property:</p>\r\n<div style=\"color:Black;background-color:White\">\r\n<pre><span style=\"color:Blue\">public</span> System.Windows.Data.Binding Command { <span style=\"color:Blue\">set</span>; <span style=\"color:Blue\">get</span>; }\r\n</pre>\r\n</div>\r\n<p>My initial inclination is to write an ValueConverter, but am I missing something obvious here? &nbsp;Is there are way to have this conversion occur implicitly, or is this a bug in EventToCommand?</p>\r\n<p>Thanks,</p>\r\n<p>Sam</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span>public RelayCommand&lt;string&gt; HandleFocusCommand</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span>{</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span>get;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span>private set;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span>}</div>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>",
    "PostedDate": "2010-02-27T18:11:10.31-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "412401",
    "ThreadId": "203254",
    "Html": "<p>Hi,</p>\r\n<p>Yes one small thing: You are using a RelayComand&lt;string&gt; however you did not set the CommandParameter to a string. If there is no CommandParameter, you should use a RelayCommand instead of RelayCommand&lt;T&gt;.</p>\r\n<p>The only exception to that rule is when PassEventArgsToCommand is set to true on the EventToCommand object. In that case, and only in that case, you should use a RelayCommand&lt;EventArgs&gt; (or a type derived from EventArgs) so that the EventArgs parameter of the event is passed to the command in the ViewModel.</p>\r\n<p>Please try this, and if it still fails, write again.</p>\r\n<p>Thanks!</p>\r\n<p>Laurent</p>",
    "PostedDate": "2010-02-28T02:41:33.32-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "412402",
    "ThreadId": "203254",
    "Html": "<p>Something else: If you use Silverlight 4, please make sure that you are using the GalaSoft.MvvmLight.dll, GalaSoft.MvvmLight.Extras.dll and System.Windows.Interactivity.dll that are located in C:\\Program Files\\Laurent Bugnion (GalaSoft)\\Mvvm Light Toolkit\\VS10\\Binaries\\Silverlight</p>\r\n<p>The VS10 directory contains the DLLs for Silverlight 4, the other ones are for Silverlight 3. The way to bind to a Command changed in Silverlight 4 due to the fact that we can now data bind to a DependencyObject (before it was only to FrameworkElement). This allowed me to delete quite a lot of code.</p>\r\n<p>Thanks,</p>\r\n<p>Laurent</p>",
    "PostedDate": "2010-02-28T02:44:37.547-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "412726",
    "ThreadId": "203254",
    "Html": "<p>The RelayCommand&lt;string&gt; was just a leftover typo after trying to see if other variants would work. &nbsp;I was actually using RelayCommand&lt;RoutedEventArgs&gt; before.</p>\r\n<p>I believe the problem was that I was using either the Silverlight 3 dlls, or an older version of SL4 alphas. &nbsp;I dowloaded the sample sln in your dragdrop blog post, and noticed that RelayCommand's command property was of type ICommand, whereas the version I was using was of type System.Windows.Data.Binding. &nbsp;As soon as I switched, everything started working properly.</p>\r\n<p>Thanks!</p>\r\n<p>--Sam</p>",
    "PostedDate": "2010-03-01T07:57:02.847-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "432461",
    "ThreadId": "203254",
    "Html": "<p>Hi,</p>\r\n<p>As you are a previous user of the discussion tab on the MVVM Light Codeplex site, I would like to inform you that I decided to encourage the usage of StackOverflow for questions regarding the MVVM Light toolkit. Please tag your questions with the mvvm-light tag.</p>\r\n<p>StackOverflow is an awesome site where tons of developers help others with their technical question.</p>\r\n<p><a href=\"http://stackoverflow.com/questions/tagged/mvvm-light\">http://stackoverflow.com/questions/tagged/mvvm-light</a></p>\r\n<p>I will monitor this tag on the StackOverflow website and do my best to answer questions. The advantage of StackOverflow over the Codeplex discussion is the sheer number of qualified developers able to help you with your questions, the visibility of the question itself, and the whole StackOverflow infrastructure (reputation, up- or down-vote, comments, etc)</p>\r\n<p>Thanks!</p>\r\n<p>Laurent</p>\r\n<p>&nbsp;</p>",
    "PostedDate": "2010-04-18T11:59:19.61-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]